![image](https://github.com/mohannad200210/Sitech-Internship/assets/95110750/1f6892ba-cfa3-4351-865c-390e94794d8d)

![image](https://github.com/mohannad200210/Sitech-Internship/assets/95110750/f3586499-1d88-4b8c-a33d-d8a6a7de15cd)

as pipeline script i use this : 
```
pipeline {
    agent any
    parameters {
        string(name: 'TAG', defaultValue: 'v1.0', description: 'Enter a tag e.g.: v1.0)')
    }
    stages {
        stage('Build Image') {
            steps {
                script {
                    sh "docker build -t mohannad200210/django-app:${params.TAG} /home/escanor/Desktop/django"
                }
            }
        }
    }
}
```
now let's try to build it 
the build failed because the user who build execute the job doesn't have the permission to use Docker 
![image](https://github.com/mohannad200210/Sitech-Internship/assets/95110750/e8742c83-bb77-4a1d-a751-b7cffc6926e6)

i will add "whoami" command to the pipeline to know who is the user execute the command and the add it to the Docker group
![image](https://github.com/mohannad200210/Sitech-Internship/assets/95110750/3b10e0a0-14fe-48dc-b47e-ad958b3c3557)
the user is Jenkins so let's add it to the docker group
```
escanor@escanor-virtual-machine:~/Desktop/django$ sudo usermod -aG docker jenkins      
[sudo] password for escanor: 
escanor@escanor-virtual-machine:~/Desktop/django$ groups jenkins
jenkins : jenkins docker
escanor@escanor-virtual-machine:~/Desktop/django$ sudo systemctl restart docker
```
we pass the last problem sucssess but now there is a new problem i cant access the path of the dockerfile: 
![image](https://github.com/mohannad200210/Sitech-Internship/assets/95110750/71234fcb-8983-45b4-bc73-9a97814cb229)

i fix but dont think it's the best way to fix it ( by moving the dockerfile to the root so jenkins can access them 
Finally it builds succsufully 
![image](https://github.com/mohannad200210/Sitech-Internship/assets/95110750/ff48735e-c0e9-4fcb-ad42-a3f4afaace42)

_______________________________________________________________________________________
Upload image pipeline : 
before build the pipeline we have to add our dockerhub credentials to jenkins :
go to     Dashboard ---> Manage Jenkins ---> Credentials ---> System ---> Global credentials (unrestricted) ---> add credentials 
![image](https://github.com/mohannad200210/Sitech-Internship/assets/95110750/9b9bdbeb-52ea-435d-b436-f8bc4a3b8cef)


![image](https://github.com/mohannad200210/Sitech-Internship/assets/95110750/a5ade1df-1842-4def-91d7-8ce8cd1bf71f)

![image](https://github.com/mohannad200210/Sitech-Internship/assets/95110750/5f4d0bf1-b736-4b7f-a194-b316b6403d4b)
as pipeline script i use this : 
```
pipeline {
    agent any
    parameters {
        string(name: 'TAG', defaultValue: 'v1.0', description: 'Enter the version tag you want to upload')
    }
    stages {
        stage('Push Image') {
            steps {
                script {
                   
                    sh "docker push mohannad200210/django-app:${params.TAG}"
                }
            }
        }
    }
}


```
![image](https://github.com/mohannad200210/Sitech-Internship/assets/95110750/60756f75-93ef-4ed5-aa7e-16a48c651676)

-------------------------------------------------------------
![image](https://github.com/mohannad200210/Sitech-Internship/assets/95110750/81606962-e54f-4e97-ad69-f0ed9ca59d1f)

```
pipeline {
    agent any
    parameters {
        string(name: 'TAG', defaultValue: 'v1.0', description: 'Enter the version tag you want to deploy')
    }
    stages {
        stage('Deploy Image') {
            steps {
                script {
                    sh "docker run -d -p 8000:8000 mohannad200210/django-app:${params.TAG}"
                }
            }
        }
    }
}
```
![image](https://github.com/mohannad200210/Sitech-Internship/assets/95110750/2d5b22e0-0b65-4e42-94f8-4e52adfb85e2)


-------------------------------
the final resuilt :
![image](https://github.com/mohannad200210/Sitech-Internship/assets/95110750/d58f86cb-ef0b-4860-9efc-28b6ec695a7e)

