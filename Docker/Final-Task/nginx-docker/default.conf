# This is the main Nginx configuration file

# Specify the user and group for Nginx to run as
user www-data;
worker_processes auto;

# Set the error log file and log level
error_log /var/log/nginx/error.log warn;

# Define the events section
events {
    worker_connections 1024;
}

# Define the HTTP server section
http {
    # Set the MIME type mappings
    include /etc/nginx/mime.types;
    
    # Set the default log format
    log_format main '$remote_addr - $remote_user [$time_local] "$request" '
                  '$status $body_bytes_sent "$http_referer" '
                  '"$http_user_agent" "$http_x_forwarded_for"';
    
    # Specify the access log file
    access_log /var/log/nginx/access.log main;

    # Set the server section
    server {
        # Listen on port 80
        listen 80;
        
        # Set the server name
        server_name example.com www.example.com;
        
        # Set the root directory for serving files
        root /var/www/html;
        
        # Define location blocks for handling requests
        location / {
            proxy_pass http://django-app:8000;
        }
        
        # Additional location blocks can be added here for different routes
        
        # Handle error pages
        error_page 404 /404.html;
        error_page 500 502 503 504 /50x.html;
        
        # Specify the location of error pages
        location = /50x.html {
            root /usr/share/nginx/html;
        }
        
        # Enable gzip compression
        gzip on;
        gzip_types text/plain text/css application/javascript image/*;
        
        # Include additional configuration files if needed
        include /etc/nginx/conf.d/*.conf;
    }
}

